webpackJsonp([1],{NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),a=o("/ocq"),s=o("CLX7"),i=o.n(s),c=o("Xxa5"),d=o.n(c),r=o("exGp"),l=o.n(r),u={mixins:[o("PKHo")],computed:{checkAll:{get:function(){return this.$store.state.checkAll},set:function(t){this.$store.commit("SET_CHECK_ALL_DATA",t)}}},methods:{removeTodoSelected:function(){var t=this;this.$store.state.checkAll&&this.$store.dispatch("REMOVE_MORE_DATA_TODO").then(function(e){t.MIXIN_Notifycation("Notify","error","Remove select all success"),t.$store.dispatch("GET_DATA_TODO").then(function(){})})}}},T={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"selectAll"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.checkAll,expression:"checkAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checkAll)?t._i(t.checkAll,null)>-1:t.checkAll},on:{change:function(e){var o=t.checkAll,n=e.target,a=!!n.checked;if(Array.isArray(o)){var s=t._i(o,null);n.checked?s<0&&(t.checkAll=o.concat([null])):s>-1&&(t.checkAll=o.slice(0,s).concat(o.slice(s+1)))}else t.checkAll=a}}}),t._v(" Select all | "+t._s(t.checkAll)+"\n  ")]),t._v(" "),o("button",{staticClass:"rmselected",on:{click:t.removeTodoSelected}},[t._v("remove selected\n  ")])])},staticRenderFns:[]},f=o("VU/8")(u,T,!1,null,null,null).exports,_=o("Dd8w"),h=o.n(_),p={mixins:[o("PKHo")],data:function(){return{statusEdit:!0,inputSave:""}},props:["todoProps"],methods:{editTodo:function(){this.statusEdit=!1,this.inputSave=this.todoProps.name},saveTodo:function(){this.statusEdit=!0;var t=this,e=h()({},this.todoProps);e.name=this.inputSave,this.$store.dispatch("EDIT_DATA_TODO",e).then(function(){t.MIXIN_Notifycation("Notify","success","Updated todo success")})},deleteTodo:function(){var t=this;this.$store.dispatch("DELETE_DATA_TODO",this.todoProps.id).then(function(){t.MIXIN_Notifycation("Notify","error","Deleted todo")})},checkTodo:function(){this.$store.commit("SET_CHECK_DATA",this.todoProps.id)}}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"itemTodo"}},[o("div",[t.statusEdit?o("li",{class:{done:t.todoProps.status}},[o("input",{attrs:{type:"checkbox"},domProps:{checked:t.todoProps.status},on:{change:t.checkTodo}}),t._v(" "),o("span",[t._v(t._s(t.todoProps.name))]),t._v(" "),o("button",{staticClass:"edit",on:{click:t.editTodo}},[t._v("Edit\n      ")]),t._v(" "),o("button",{staticClass:"delete",on:{click:t.deleteTodo}},[t._v("Delete\n      ")]),t._v(" "),o("div",{staticClass:"clear"})]):t._e(),t._v(" "),t.statusEdit?t._e():o("li",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.inputSave,expression:"inputSave"}],style:{width:"70%"},attrs:{type:"text"},domProps:{value:t.inputSave},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveTodo(e)},input:function(e){e.target.composing||(t.inputSave=e.target.value)}}}),t._v(" "),o("button",{staticClass:"save",on:{click:t.saveTodo}},[t._v("Save\n      ")])])])])},staticRenderFns:[]};var A=o("VU/8")(p,v,!1,function(t){o("zRq1")},"data-v-6dfb9b2b",null).exports,E={methods:{filterCate:function(t){this.$router.push({path:"/",query:{filter:t}}),this.$store.commit("SET_FILTER_DATA",t),console.log("filter query url---",this.$route)}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"footer-todo"},[o("p",[t._v("Category :")]),t._v(" "),o("button",{staticClass:"status",class:{active:"all"===t.$store.state.filterCate},on:{click:function(e){return t.filterCate("all")}}},[t._v("All\n  ")]),t._v(" "),o("button",{staticClass:"status",class:{active:"active"===t.$store.state.filterCate},on:{click:function(e){return t.filterCate("active")}}},[t._v("Active\n  ")]),t._v(" "),o("button",{staticClass:"status",class:{active:"done"===t.$store.state.filterCate},on:{click:function(e){return t.filterCate("done")}}},[t._v("Done\n  ")])])},staticRenderFns:[]},C=o("VU/8")(E,m,!1,null,null,null).exports,D={mixins:[o("PKHo")],methods:{addTodo:function(t){var e=this;t.target.value&&(this.$store.dispatch("ADD_DATA_TODO",t.target.value).then(function(t){e.MIXIN_Notifycation("Notify","info","Add new todo success")}),this.$refs.addInput.value="")}}},k={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{ref:"addInput",staticClass:"input-text",attrs:{type:"text",placeholder:"What need to be done?"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.addTodo(e))}}})},staticRenderFns:[]},g=o("VU/8")(D,k,!1,null,null,null).exports,O=o("mtWM"),y=o.n(O),x=o("M4fF"),S={data:function(){return{nextPage:null,isContinueCall:!1,iconLoading:!1}},components:{SelectedAll:f,ItemTodo:A,FilterCategory:C,AddTodo:g},beforeMount:function(){this.$store.dispatch("GET_DATA_TODO")},mounted:function(){this.scrollLoadMore()},methods:{scrollLoadMore:function(){var t=this,e=document.querySelector(".scrollbar");e.addEventListener("scroll",function(){Math.ceil(e.scrollTop)===e.scrollHeight-e.offsetHeight&&t.$store.state.nextPage&&(t.iconLoading=!0,x.debounce(l()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("https://api-express-and-vuejs.herokuapp.com/api/v1/todos?page="+t.$store.state.nextPage).then(function(e){t.$store.commit("SET_REMOVE_EXIST_SCROLL",e.data.data),0!==e.data.data.length?t.isContinueCall=!1:t.isContinueCall=!0,t.$store.commit("SET_NEXT_PAGE",e),t.$store.commit("SET_DATA_TODO",e.data.data),t.iconLoading=!1});case 2:if(t.$store.state.nextPage&&t.isContinueCall){e.next=0;break}case 3:case"end":return e.stop()}},e,this)})),1e3)())})}}},$={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"todo"}},[o("h3",[t._v("Todos App")]),t._v(" "),o("notifications",{attrs:{group:"Notify",position:"top right"}}),t._v(" "),o("AddTodo"),t._v(" "),o("ul",{staticClass:"item-todo"},[o("selected-all"),t._v(" "),"all"===t.$store.state.filterCate&&0===t.$store.getters.GETTER_TODO_FILTER.length?o("li",{staticClass:"notTodo"},[t._v("Not todo all !")]):t._e(),t._v(" "),"active"===t.$store.state.filterCate&&0===t.$store.getters.GETTER_TODO_FILTER.length?o("li",{staticClass:"notTodo"},[t._v("Not todo active !")]):t._e(),t._v(" "),"done"===t.$store.state.filterCate&&0===t.$store.getters.GETTER_TODO_FILTER.length?o("li",{staticClass:"notTodo"},[t._v("Not todo done !")]):t._e(),t._v(" "),o("div",{staticClass:"scrollbar"},t._l(t.$store.getters.GETTER_TODO_FILTER,function(t){return o("ItemTodo",{key:t.id,attrs:{todoProps:t}})}),1),t._v(" "),t.iconLoading?o("li",{staticClass:"spinner"},[o("i",{staticClass:"fas fa-spinner fa-spin"})]):t._e(),t._v(" "),o("selected-all")],1),t._v(" "),o("FilterCategory")],1)},staticRenderFns:[]};var I=o("VU/8")(S,$,!1,function(t){o("dmNv")},null,null).exports,L=o("//Fk"),R=o.n(L),P=o("Gu7T"),N=o.n(P),b=o("NYxO");n.default.use(b.a);var M=new b.a.Store({strict:!0,state:{dataTodo:[],filterCate:"all",checkAll:!1,nextPage:null,dataCheck:[],dataCheckId:[]},getters:{GETTER_TODO_FILTER:function(t){return"all"===t.filterCate?t.dataTodo:"active"===t.filterCate?t.dataTodo.filter(function(t){return!t.status}):"done"===t.filterCate?t.dataTodo.filter(function(t){return t.status}):t.dataTodo}},mutations:{SET_DATA_TODO:function(t,e){t.dataTodo=[].concat(N()(t.dataTodo),N()(e))},SET_ADD_DATA:function(t,e){t.dataTodo.unshift({id:e.id,name:e.name,status:e.status})},SET_UPDATE_DATA:function(t,e){var o=t.dataTodo.findIndex(function(t){return t.id===e.id});t.dataTodo[o].name=e.todoUpdate},SET_DELETE_DATA:function(t,e){var o=t.dataTodo.findIndex(function(t){return t.id===e});t.dataTodo.splice(o,1)},SET_REMOVE_ALL_DATA:function(t){t.dataTodo=t.dataTodo.filter(function(t){return!t.status}),0===t.dataTodo.length&&(t.checkAll=!1)},SET_FILTER_DATA:function(t,e){t.filterCate="all"===e?"all":"active"===e?"active":"done"===e?"done":"all"},SET_CHECK_DATA:function(t,e){var o=t.dataTodo.findIndex(function(t){return t.id===e});t.dataTodo[o].status=!t.dataTodo[o].status,t.dataTodo[o].status?(t.dataCheck.push(t.dataTodo[o]),t.dataCheckId.push(t.dataTodo[o].id),t.dataCheck.length===t.dataTodo.length&&(t.checkAll=!0)):(t.dataCheck.splice(o,1),t.checkAll=!1)},SET_CHECK_ALL_DATA:function(t,e){t.checkAll=e,t.dataTodo.forEach(function(e){t.checkAll?(e.status=!0,t.dataCheck.push(e),t.dataCheckId.push(e.id)):(e.status=!1,t.dataCheck=[])})},SET_REMOVE_EXIST_SCROLL:function(t,e){for(var o=0;o<t.dataTodo.length;o++)for(var n=0;n<e.length;n++)t.dataTodo[o].id===e[n].id&&e.splice(n,1)},SET_NEXT_PAGE:function(t,e){t.nextPage=e.data.nextPage}},actions:{GET_DATA_TODO:function(t){return new R.a(function(e,o){y.a.get("https://api-express-and-vuejs.herokuapp.com/api/v1/todos").then(function(o){e(o),t.commit("SET_DATA_TODO",o.data.data),t.commit("SET_NEXT_PAGE",o)}).catch(function(t){console.log(t)})})},ADD_DATA_TODO:function(t,e){return new R.a(function(o,n){y.a.post("https://api-express-and-vuejs.herokuapp.com/api/v1/todos",{name:e}).then(function(e){o(e),t.commit("SET_ADD_DATA",e.data.data)}).catch(function(t){console.log(t)})})},EDIT_DATA_TODO:function(t,e){return new R.a(function(o,n){y.a.put("https://api-express-and-vuejs.herokuapp.com/api/v1/todos/"+e.id,{id:e.id,name:e.name,status:e.status}).then(function(e){o(e),t.commit("SET_UPDATE_DATA",{id:e.data.data.id,todoUpdate:e.data.data.name})}).catch(function(t){console.log(t)})})},DELETE_DATA_TODO:function(t,e){return new R.a(function(o,n){y.a.delete("https://api-express-and-vuejs.herokuapp.com/api/v1/todos/"+e).then(function(n){o(n),t.commit("SET_DELETE_DATA",e)}).catch(function(t){console.log(t)})})},REMOVE_MORE_DATA_TODO:function(t){return new R.a(function(e,o){y()({method:"delete",url:"https://api-express-and-vuejs.herokuapp.com/api/v1/todos",data:{ids:t.state.dataCheckId},headers:{"Content-Type":"application/json"}}).then(function(o){e(o),t.commit("SET_REMOVE_ALL_DATA")}).catch(function(t){console.log(t)})})}}}),w=[{path:"/",name:"homepage",component:I}];n.default.config.productionTip=!1,n.default.use(i.a),n.default.use(a.a);var F=new a.a({mode:"history",routes:w});new n.default({el:"#app",store:M,router:F,components:{App:I},template:"<App/>"})},PKHo:function(t,e){t.exports={namespaced:!0,methods:{MIXIN_Notifycation:function(t,e,o){this.$notify({group:t,type:e,title:o,duration:1e3,speed:1e3})}}}},dmNv:function(t,e){},zRq1:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.11c708eb653dbb4b1de0.js.map